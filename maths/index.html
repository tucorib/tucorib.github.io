<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">

	<head>
		<meta charset="UTF-8">
		
		<!-- Page title -->
		<title>Probabilités - Monty Hall</title>
		<!-- Smartphone screen dimension management -->
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		
		<!-- Libraries -->
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	    <script>
			var structure = null;
			
			// Init tables
			$.getJSON("maths.json", function(data) {
				structure = data;
				
				$.each(structure['activities'], function(i, activity){
					var domains = activity['domains'].map(function(domain){
						return $('<img>', {
	        				src: structure['domains'][domain]['thumb'],
	        				class: 'rounded',
	        				alt: domain,
	        				title: domain,
	        				width: '48px',
	        				height: '48px',
	        			})
			    	});
		    	
					$('#activities .carousel-inner')
					.append(
						$('<div>', { class: 'carousel-item' + (i == 0 ? ' active' : '') })
						.append(
							$('<div>', {
								class: 'card mb-3 border-secondary'
							})
							.append(
								$('<div>', { class: 'd-flex' })
								.append(
									$('<div>', { class: 'col d-flex flex-column flex-grow-1' })
									.append(
										$('<div>', {
											class: 'card-header d-flex'
										})
										.append(
											$('<h4>', { class: 'card-title flex-grow-1' })
											.append(
												$('<a>', {
									    			href: activity['url'],
									    			target: '_blank',
									    			class: 'font-weight-bold',
									    			text: activity['name']
									    		})	
											)
										)
										.append(
											// Social share
										)
									)
									.append(
										$('<div>', {
											class: 'card-body'
										})
										.append(
											$('<div>', { class: 'float-right d-flex flex-wrap' })
											.append(domains)
										)
										.append(
											$('<p>', { class: 'card-text' })
											.append(activity['description'])
										)
									)
									.append(
										$('<div>', {
											class: 'card-footer text-right'
										})
										.append(
							    			$('<small>', {
							    				class: 'text-muted',
							    				text: activity['domains'].join(', ')
							    			})
										)
									)
								)
								.append(
									$('<img>', { 
										src: activity['thumb'],
										alt: activity['name'],
										style: 'object-fit: cover;',
										height: '300px',
										width: '300px',
										class: 'border border-left-4 border-right-0 border-top-0 border-bottom-0 border-secondary'
									 })
								)
							)
						)
					);
					
					$('#activities-control')
					.append(
						$('<a>', {
							href: '#',
							click: function(){
								$('#activities').carousel(i);
							}
						})
						.append(
							$('<img>', { 
								src: activity['thumb'],
								alt: activity['name'],
								style: 'object-fit: cover;',
								width: '100px',
								height: '100px',
								class: 'm-2 rounded'
							 })
						)
					);
				});
			});
		</script>
	</head>
	<body>
		<div class="container">
			<div class="jumbotron">
				<h1>Activités</h1>
				<div id="activities" class="carousel slide w-100" data-ride="carousel" data-interval="10000">
        			<div class="carousel-inner"></div>
				</div>
				<div id="activities-control" class="w-100 d-flex flex-nowrap text-center" style="overflow-x: auto"></div>
			</div>
		</div>
	</body>
</html>