<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">

	<head>
		<meta charset="UTF-8">
		
		<!-- Page title -->
		<title>Probabilités - Monty Hall</title>
		<!-- Smartphone screen dimension management -->
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		
		<!-- Libraries -->
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
		<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
		<link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">
		<script src="https://cdn.datatables.net/responsive/2.2.5/js/dataTables.responsive.min.js"></script>
		<script src="https://cdn.datatables.net/responsive/2.2.5/js/responsive.bootstrap4.min.js"></script>
		<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.5/css/responsive.bootstrap4.min.css">
		<script src="https://cdn.datatables.net/rowgroup/1.1.2/js/dataTables.rowGroup.min.js"></script>
		<link rel="stylesheet" href="https://cdn.datatables.net/rowgroup/1.1.2/css/rowGroup.dataTables.min.css">
		
		<script>
			var structure = null;
			
			$(document).ready( function () {
				// Init tables
				$.getJSON("maths.json", function(data) {
					structure = data;
					
					// Init tables
				    $('#activities').DataTable({
				    	searching: true,
	    				ordering:  true,
	    				paging: true,
	    				language: {
					        url: '\/\/cdn.datatables.net/plug-ins/1.10.21/i18n/French.json'
					    },
    
	    				data: data['activities'],
	    				
					    columnDefs: [
	    					{
							    targets: 0,
							    data: "name",
							    render: function ( data, type, row, meta ) {
							    	var containers = row['domains'].map(function(domain){
										return $('<img>', {
				            				src: structure['domains'][domain]['thumb'],
				            				class: 'rounded ml-2',
				            				alt: domain,
				            				title: domain,
				            				width: '32px',
				            				height: '32px',
				            			});							    	
							    	});
							    	
							    	return $('<div>', {
							    		class: 'd-flex align-items-center'
							    	})
							    	.append(
							    		$('<a>', {
							    			href: row['url'],
							    			target: '_blank',
							    			class: 'font-weight-bold flex-grow-1',
							    			text: row['name']
							    		})
							    	)
							    	.append(containers)[0].outerHTML;
							    },
							    class: "p-2 w-75",
					  		},
					  		{
							    targets: 1,
							    data: "level",
							    class: "p-2 text-center w-25",
					  		},
					  	]
				    });
				});
			} );
		</script>
	</head>
	<body>
		<div class="container">
			<div class="jumbotron">
				<h1>Activités</h1>
				<table id="activities" class="table table-striped table-bordered w-100">
				    <thead>
				        <tr>
				            <th>Activité</th>
				            <th>Niveau</th>
				        </tr>
				    </thead>
				    <tbody>
				    </tbody>
				</table>
			</div>
		</div>
	</body>
</html>